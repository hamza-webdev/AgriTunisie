{"version":3,"sources":["components/common/Button.js","components/layout/Navbar.js","components/layout/Footer.js","components/layout/MainLayout.js","components/common/Card.js","pages/HomePage.js","components/common/Input.js","components/common/Alert.js","components/common/LoadingSpinner.js","pages/LoginPage.js","pages/RegisterPage.js","pages/DashboardPage.js","services/parcelleService.js","pages/parcelles/ParcellesListPage.js","pages/parcelles/ParcelleFormPage.js","pages/parcelles/ParcelleDetailPage.js","pages/cultures/CulturesCataloguePage.js","pages/elevage/ElevagePage.js","pages/prix/PrixPage.js","pages/meteo/MeteoPage.js","pages/communaute/CommunautePage.js","pages/gemini/GeminiPage.js","pages/NotFoundPage.js","AppRouter.js","AgriApp.js","index.js","contexts/AuthContext.js","services/apiService.js"],"names":["Button","_ref","children","onClick","type","variant","className","disabled","Icon","React","createElement","concat","primary","secondary","danger","ghost","Navbar","navigateTo","user","logout","isAuthenticated","useAuth","isMobileMenuOpen","setIsMobileMenuOpen","useState","handleLogout","navItems","name","page","icon","Home","authRequired","MapPinned","Leaf","Tractor","ShoppingCart","Sun","MessageSquare","Brain","Shield","filter","item","map","key","size","nom_complet","email","LogOut","LogIn","UserPlus","aria-controls","aria-expanded","X","Menu","id","Footer","Date","getFullYear","MainLayout","Card","AgriApp","AuthProvider","AppRouter","Input","placeholder","value","onChange","label","required","error","htmlFor","Alert","message","onClose","icons","info","Info","success","CheckCircle","warning","AlertTriangle","XCircle","role","LoadingSpinner","sm","md","lg","LoginPage","setEmail","password","setPassword","setError","loadingState","setLoadingState","login","onSubmit","async","e","preventDefault","err","target","RegisterPage","nomComplet","setNomComplet","confirmPassword","setConfirmPassword","numeroTelephone","setNumeroTelephone","setSuccess","register","mot_de_passe","numero_telephone","setTimeout","DashboardPage","getParcelleById","apiService","get","ParcellesListPage","parcelles","setParcelles","pagination","setPagination","currentPage","setCurrentPage","fetchParcelles","useCallback","data","arguments","length","undefined","limit","parcelleService","includes","useEffect","handleDelete","window","confirm","delete","p","handlePageChange","newPage","totalPages","PlusCircle","scope","parcelle","nom_parcelle","superficie_calculee_ha","type_sol_predominant","Eye","Edit3","Trash2","ParcelleFormPage","parcelleId","nomParcelle","setNomParcelle","description","setDescription","superficie","setSuperficie","typeSol","setTypeSol","geometrie","setGeometrie","cultureActuelleId","setCultureActuelleId","culturesCatalogue","setCulturesCatalogue","formError","setFormError","formSuccess","setFormSuccess","isEditing","console","fetchCultures","then","JSON","stringify","culture_actuelle_id","catch","parsedGeometrie","parse","parcelleData","parseFloat","parseInt","put","post","rows","c","nom_culture","ParcelleDetailPage","setParcelle","date_creation","toLocaleDateString","CulturesCataloguePage","ElevagePage","PrixPage","MeteoPage","CommunautePage","GeminiPage","NotFoundPage","AppRouterInternal","pageParam","setPageParam","loading","authLoading","param","scrollTo","pageComponent","HomePage","ReactDOM","createRoot","document","getElementById","render","StrictMode","API_BASE_URL_CONTEXT","getApiBaseUrlFromContext","process","REACT_APP_API_URL","warn","AuthContextInstance","createContext","setUser","token","setToken","localStorage","getItem","loadingAuth","setLoadingAuth","removeItem","storedUser","Provider","response","fetch","method","headers","body","json","ok","Error","setItem","userData","useContext","API_BASE_URL_SERVICE","getApiBaseUrlFromApiService","endpoint","status","errorData","statusText"],"mappings":"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","file":"static/js/main.4744db8f.chunk.js","sourcesContent":["import React from 'react';\r\nexport const Button = ({ children, onClick, type = 'button', variant = 'primary', className = '', disabled = false, Icon }) => {\r\n    const baseStyle = \"inline-flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-2\";\r\n    const variants = { primary: \"text-white bg-green-600 hover:bg-green-700 focus:ring-green-500\", secondary: \"text-green-700 bg-green-100 hover:bg-green-200 focus:ring-green-500\", danger: \"text-white bg-red-600 hover:bg-red-700 focus:ring-red-500\", ghost: \"text-gray-700 bg-transparent hover:bg-gray-100 focus:ring-gray-500\" };\r\n    const disabledStyle = \"opacity-50 cursor-not-allowed\";\r\n    return (<button type={type} onClick={onClick} disabled={disabled} className={`${baseStyle} ${variants[variant]} ${disabled ? disabledStyle : ''} ${className}`}>{Icon && <Icon className=\"mr-2 h-5 w-5\" />}{children}</button>);\r\n};","// src/components/layout/Navbar.js\r\nimport React, { useState } from 'react'; // Déjà importé\r\nimport { useAuth } from '../../contexts/AuthContext'; // Adapter le chemin\r\nimport { Button } from '../common/Button'; // Adapter le chemin\r\nimport { Shield, LogIn, UserPlus, Home, LogOut, MapPinned, Leaf, Tractor, ShoppingCart, Sun, MessageSquare, Brain, Menu, X } from 'lucide-react';\r\n\r\nexport const Navbar = ({ navigateTo }) => { // Exporter directement\r\n    const { user, logout, isAuthenticated } = useAuth(); // Utilise useAuth\r\n    const [isMobileMenuOpen, setIsMobileMenuOpen] = useState(false);\r\n    // ... (code du composant Navbar comme avant, s'assurer que useAuth est importé correctement si AuthContext est séparé)\r\n    const handleLogout = () => { logout(); navigateTo('login'); };\r\n    const navItems = [\r\n        { name: 'Accueil', page: 'home', icon: Home, authRequired: false },\r\n        { name: 'Mes Parcelles', page: 'parcelles', icon: MapPinned, authRequired: true },\r\n        { name: 'Catalogue Cultures', page: 'cultures', icon: Leaf, authRequired: false },\r\n        { name: 'Élevage', page: 'elevage', icon: Tractor, authRequired: true },\r\n        { name: 'Bourse des Prix', page: 'prix', icon: ShoppingCart, authRequired: false },\r\n        { name: 'Météo', page: 'meteo', icon: Sun, authRequired: true },\r\n        { name: 'Communauté', page: 'communaute', icon: MessageSquare, authRequired: true },\r\n        { name: 'Conseils IA', page: 'gemini', icon: Brain, authRequired: true },\r\n    ];\r\n    return (\r\n        <nav className=\"bg-white shadow-md sticky top-0 z-40\">\r\n            <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\r\n                <div className=\"flex items-center justify-between h-16\">\r\n                    <div className=\"flex items-center\">\r\n                        <Shield className=\"h-8 w-8 text-green-600\" />\r\n                        <span className=\"font-bold text-xl text-green-700 ml-2 cursor-pointer\" onClick={() => navigateTo('home')}>AgriTunisie</span>\r\n                    </div>\r\n                    <div className=\"hidden md:block\">\r\n                        <div className=\"ml-10 flex items-baseline space-x-4\">\r\n                            {navItems.filter(item => !item.authRequired || isAuthenticated).map((item) => (\r\n                                <button key={item.name} onClick={() => navigateTo(item.page)} className=\"text-gray-600 hover:bg-green-50 hover:text-green-700 px-3 py-2 rounded-md text-sm font-medium flex items-center\">\r\n                                    <item.icon size={18} className=\"mr-1\" /> {item.name}\r\n                                </button>\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"hidden md:block\">\r\n                        {isAuthenticated && user ? (\r\n                            <div className=\"ml-4 flex items-center md:ml-6\">\r\n                                <span className=\"text-gray-700 text-sm mr-3\">Bonjour, {user.nom_complet || user.email}</span>\r\n                                <Button onClick={handleLogout} variant=\"secondary\" Icon={LogOut}>Déconnexion</Button>\r\n                            </div>\r\n                        ) : (\r\n                            <div className=\"space-x-2\">\r\n                                <Button onClick={() => navigateTo('login')} variant=\"primary\" Icon={LogIn}>Connexion</Button>\r\n                                <Button onClick={() => navigateTo('register')} variant=\"secondary\" Icon={UserPlus}>Inscription</Button>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                    <div className=\"-mr-2 flex md:hidden\">\r\n                        <button onClick={() => setIsMobileMenuOpen(!isMobileMenuOpen)} type=\"button\" className=\"bg-green-50 inline-flex items-center justify-center p-2 rounded-md text-green-600 hover:text-green-700 hover:bg-green-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-green-500\" aria-controls=\"mobile-menu\" aria-expanded=\"false\">\r\n                            <span className=\"sr-only\">Ouvrir le menu principal</span>\r\n                            {isMobileMenuOpen ? <X className=\"block h-6 w-6\" /> : <Menu className=\"block h-6 w-6\" />}\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            {isMobileMenuOpen && (\r\n                <div className=\"md:hidden\" id=\"mobile-menu\">\r\n                    <div className=\"px-2 pt-2 pb-3 space-y-1 sm:px-3\">\r\n                        {navItems.filter(item => !item.authRequired || isAuthenticated).map((item) => (\r\n                             <button key={item.name} onClick={() => { navigateTo(item.page); setIsMobileMenuOpen(false); }} className=\"text-gray-600 hover:bg-green-50 hover:text-green-700 block px-3 py-2 rounded-md text-base font-medium w-full text-left flex items-center\">\r\n                                <item.icon size={18} className=\"mr-2\" /> {item.name}\r\n                            </button>\r\n                        ))}\r\n                    </div>\r\n                    <div className=\"pt-4 pb-3 border-t border-gray-200\">\r\n                        {isAuthenticated && user ? (\r\n                            <div className=\"px-5\">\r\n                                <div className=\"text-base font-medium text-gray-800\">{user.nom_complet || user.email}</div>\r\n                                <div className=\"text-sm font-medium text-gray-500\">{user.email}</div>\r\n                                <Button onClick={() => {handleLogout(); setIsMobileMenuOpen(false);}} variant=\"secondary\" Icon={LogOut} className=\"mt-3 w-full\">Déconnexion</Button>\r\n                            </div>\r\n                        ) : (\r\n                            <div className=\"px-2 space-y-2\">\r\n                                <Button onClick={() => {navigateTo('login'); setIsMobileMenuOpen(false);}} variant=\"primary\" Icon={LogIn} className=\"w-full\">Connexion</Button>\r\n                                <Button onClick={() => {navigateTo('register'); setIsMobileMenuOpen(false);}} variant=\"secondary\" Icon={UserPlus} className=\"w-full\">Inscription</Button>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </nav>\r\n    );\r\n};\r\n// ... (Footer, MainLayout comme avant, à mettre dans leurs propres fichiers)\r\n","import React from 'react';\r\n\r\nconst Footer = () => (<footer className=\"bg-gray-100 border-t mt-auto\"><div className=\"max-w-7xl mx-auto py-8 px-4 sm:px-6 lg:px-8 text-center\"><p className=\"text-sm text-gray-500\">&copy; {new Date().getFullYear()} AgriTunisie Connect. Tous droits réservés.</p><p className=\"text-xs text-gray-400 mt-1\">Développé avec passion pour l'agriculture tunisienne.</p></div></footer>);\r\nexport default Footer;","import React from 'react';\r\nimport { Navbar } from './Navbar';\r\nimport Footer from './Footer';\r\n\r\nconst MainLayout = ({ children, navigateTo }) => (<div className=\"min-h-screen flex flex-col bg-gray-50\"><Navbar navigateTo={navigateTo} /><main className=\"flex-grow container mx-auto px-4 py-8 sm:px-6 lg:px-8\">{children}</main><Footer /></div>);\r\nexport default MainLayout;","import React from 'react';\r\nexport const Card = ({ children, className = '' }) =>\r\n    (<div className={`bg-white shadow-lg rounded-lg p-6 ${className}`}>{children}</div>);\r\n","// src/pages/HomePage.js\r\nimport React from 'react';\r\nimport { Card } from '../components/common/Card';\r\nimport { Button } from '../components/common/Button';\r\nimport { Shield, MapPinned, Leaf } from 'lucide-react';\r\nimport { AuthProvider } from '../contexts/AuthContext'; // Import AuthProvider\r\nimport AppRouter from '../AppRouter'; // Adjust path if AppRouter is elsewhere\r\n\r\nexport const HomePage = ({ navigateTo }) => { // Exporter directement\r\n    // ... (code du composant HomePage comme avant)\r\n    return (\r\n    <Card className=\"text-center\">\r\n        <Shield size={64} className=\"mx-auto text-green-600 mb-4\" />\r\n        <h1 className=\"text-4xl font-bold text-gray-800 mb-2\">Bienvenue sur AgriTunisie Connect</h1>\r\n        <p className=\"text-lg text-gray-600 mb-6\">Votre partenaire numérique pour une agriculture prospère et durable en Tunisie.</p>\r\n        <div className=\"space-x-4\">\r\n            <Button onClick={() => navigateTo('parcelles')} variant=\"primary\" Icon={MapPinned}>Voir Mes Parcelles</Button>\r\n            <Button onClick={() => navigateTo('cultures')} variant=\"secondary\" Icon={Leaf}>Explorer les Cultures</Button>\r\n        </div>\r\n    </Card>\r\n    );\r\n};\r\n// ... (Autres pages : LoginPage, RegisterPage, DashboardPage, ParcellesListPage, ParcelleFormPage, ParcelleDetailPage, etc. à mettre dans leurs propres fichiers)\r\n// ... (S'assurer d'importer useAuth, les services, les composants communs avec les bons chemins relatifs)\r\n\r\n\r\n// Pour que le code ci-dessus fonctionne comme un seul fichier exécutable (ce qui n'est pas l'objectif final mais permet de le tester dans cet environnement):\r\n// 1. Toutes les déclarations `export const ...` deviendraient de simples `const ...` sauf pour le composant racine.\r\n// 2. Les imports relatifs seraient supprimés car tout est dans le même fichier.\r\n// 3. Le composant AgriApp serait le seul export par défaut.\r\n\r\n// Composant racine pour l'exportation dans cet exemple de fichier unique\r\nconst AgriApp = () => (\r\n    <AuthProvider>\r\n        <AppRouter />\r\n    </AuthProvider>\r\n);\r\n\r\nexport default AgriApp;","import React from 'react';\r\nexport const Input = ({ type = 'text', placeholder, value, onChange, name, label, required, error }) => (\r\n    <div className=\"mb-4\">\r\n        {label && <label htmlFor={name} className=\"block text-sm font-medium text-gray-700 mb-1\">{label}{required && <span className=\"text-red-500\">*</span>}</label>}\r\n        <input type={type} id={name} name={name} placeholder={placeholder} value={value} onChange={onChange} required={required} className={`mt-1 block w-full px-3 py-2 border ${error ? 'border-red-500' : 'border-gray-300'} rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm`} />\r\n        {error && <p className=\"mt-1 text-xs text-red-500\">{error}</p>}\r\n    </div>\r\n);","import React from 'react';\r\nimport { Info, CheckCircle, AlertTriangle, XCircle, X } from 'lucide-react';\r\n\r\nexport const Alert = ({ message, type = 'info', onClose }) => {\r\n    const baseStyle = \"p-4 mb-4 rounded-md flex items-center justify-between\";\r\n    const types = { info: \"bg-blue-100 text-blue-700\", success: \"bg-green-100 text-green-700\", warning: \"bg-yellow-100 text-yellow-700\", error: \"bg-red-100 text-red-700\" };\r\n    const icons = { info: <Info size={20} className=\"mr-2\" />, success: <CheckCircle size={20} className=\"mr-2\" />, warning: <AlertTriangle size={20} className=\"mr-2\" />, error: <XCircle size={20} className=\"mr-2\" /> };\r\n    if (!message) return null;\r\n    return (<div className={`${baseStyle} ${types[type]}`} role=\"alert\"><div className=\"flex items-center\">{icons[type]}<span>{message}</span></div>{onClose && (<button onClick={onClose} className=\"ml-4\"><X size={20} /></button>)}</div>);\r\n};","import React from 'react';\r\nexport const LoadingSpinner = ({ size = 'md' }) => {\r\n    const sizes = { sm: 'h-6 w-6', md: 'h-10 w-10', lg: 'h-16 w-16' };\r\n    return (<div className=\"flex justify-center items-center\"><div className={`${sizes[size]} animate-spin rounded-full border-4 border-green-500 border-t-transparent`}></div></div>);\r\n};","// src/pages/LoginPage.js\r\nimport React, { useState } from 'react';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport { Card } from '../components/common/Card';\r\nimport { Input } from '../components/common/Input';\r\nimport { Button } from '../components/common/Button';\r\nimport { Alert } from '../components/common/Alert';\r\nimport { LoadingSpinner } from '../components/common/LoadingSpinner';\r\nimport { LogIn } from 'lucide-react';\r\n\r\nconst LoginPage = ({ navigateTo }) => {\r\n    const [email, setEmail] = useState('');\r\n    const [password, setPassword] = useState('');\r\n    const [error, setError] = useState('');\r\n    const [loadingState, setLoadingState] = useState(false);\r\n    const { login } = useAuth();\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        setError('');\r\n        setLoadingState(true);\r\n        try {\r\n            await login(email, password);\r\n            navigateTo('dashboard');\r\n        } catch (err) {\r\n            setError(err.message || 'Erreur de connexion. Veuillez vérifier vos identifiants.');\r\n        } finally {\r\n            setLoadingState(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"max-w-md mx-auto mt-10\">\r\n            <Card>\r\n                <div className=\"text-center mb-6\"><LogIn size={48} className=\"mx-auto text-green-600\" /><h2 className=\"text-2xl font-bold text-gray-800 mt-2\">Connexion</h2></div>\r\n                {error && <Alert message={error} type=\"error\" onClose={() => setError('')} />}\r\n                <form onSubmit={handleSubmit}>\r\n                    <Input label=\"Email\" type=\"email\" name=\"email\" value={email} onChange={(e) => setEmail(e.target.value)} required />\r\n                    <Input label=\"Mot de passe\" type=\"password\" name=\"password\" value={password} onChange={(e) => setPassword(e.target.value)} required />\r\n                    <Button type=\"submit\" variant=\"primary\" className=\"w-full\" disabled={loadingState} Icon={loadingState ? null : LogIn}>{loadingState ? <LoadingSpinner size=\"sm\" /> : 'Se Connecter'}</Button>\r\n                </form>\r\n                <p className=\"text-sm text-center mt-4\">Pas encore de compte ? <button onClick={() => navigateTo('register')} className=\"font-medium text-green-600 hover:text-green-500\">Inscrivez-vous</button></p>\r\n            </Card>\r\n        </div>\r\n    );\r\n};\r\nexport default LoginPage;","// src/pages/RegisterPage.js\r\nimport React, { useState } from 'react';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport { Card } from '../components/common/Card';\r\nimport { Input } from '../components/common/Input';\r\nimport { Button } from '../components/common/Button';\r\nimport { Alert } from '../components/common/Alert';\r\nimport { LoadingSpinner } from '../components/common/LoadingSpinner';\r\nimport { UserPlus } from 'lucide-react';\r\n\r\nconst RegisterPage = ({ navigateTo }) => {\r\n    const [nomComplet, setNomComplet] = useState('');\r\n    const [email, setEmail] = useState('');\r\n    const [password, setPassword] = useState('');\r\n    const [confirmPassword, setConfirmPassword] = useState('');\r\n    const [numeroTelephone, setNumeroTelephone] = useState('');\r\n    const [error, setError] = useState('');\r\n    const [success, setSuccess] = useState('');\r\n    const [loadingState, setLoadingState] = useState(false);\r\n    const { register } = useAuth();\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        if (password !== confirmPassword) { setError(\"Les mots de passe ne correspondent pas.\"); return; }\r\n        setError(''); setSuccess(''); setLoadingState(true);\r\n        try {\r\n            await register({ nom_complet: nomComplet, email, mot_de_passe: password, numero_telephone: numeroTelephone });\r\n            setSuccess(\"Inscription réussie ! Vous pouvez maintenant vous connecter.\");\r\n            setTimeout(() => navigateTo('login'), 2000);\r\n        } catch (err) {\r\n            setError(err.message || 'Erreur lors de l\\'inscription.');\r\n        } finally {\r\n            setLoadingState(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"max-w-md mx-auto mt-10\">\r\n            <Card>\r\n                <div className=\"text-center mb-6\"><UserPlus size={48} className=\"mx-auto text-green-600\" /><h2 className=\"text-2xl font-bold text-gray-800 mt-2\">Inscription</h2></div>\r\n                {error && <Alert message={error} type=\"error\" onClose={() => setError('')} />}\r\n                {success && <Alert message={success} type=\"success\" onClose={() => setSuccess('')} />}\r\n                <form onSubmit={handleSubmit}>\r\n                    <Input label=\"Nom complet\" name=\"nomComplet\" value={nomComplet} onChange={(e) => setNomComplet(e.target.value)} required />\r\n                    <Input label=\"Email\" type=\"email\" name=\"email\" value={email} onChange={(e) => setEmail(e.target.value)} required />\r\n                    <Input label=\"Numéro de téléphone (Optionnel)\" name=\"numeroTelephone\" value={numeroTelephone} onChange={(e) => setNumeroTelephone(e.target.value)} />\r\n                    <Input label=\"Mot de passe\" type=\"password\" name=\"password\" value={password} onChange={(e) => setPassword(e.target.value)} required />\r\n                    <Input label=\"Confirmer le mot de passe\" type=\"password\" name=\"confirmPassword\" value={confirmPassword} onChange={(e) => setConfirmPassword(e.target.value)} required />\r\n                    <Button type=\"submit\" variant=\"primary\" className=\"w-full\" disabled={loadingState} Icon={loadingState ? null : UserPlus}>{loadingState ? <LoadingSpinner size=\"sm\" /> : 'S\\'inscrire'}</Button>\r\n                </form>\r\n                <p className=\"text-sm text-center mt-4\">Déjà un compte ? <button onClick={() => navigateTo('login')} className=\"font-medium text-green-600 hover:text-green-500\">Connectez-vous</button></p>\r\n            </Card>\r\n        </div>\r\n    );\r\n};\r\nexport default RegisterPage;","import React from 'react';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport { Card } from '../components/common/Card';\r\nimport { Button } from '../components/common/Button';\r\nimport { MapPinned, Sun, ShoppingCart } from 'lucide-react';\r\n\r\nconst DashboardPage = ({ navigateTo }) => {\r\n    const { user } = useAuth();\r\n    return (\r\n        <Card>\r\n            <h1 className=\"text-2xl font-semibold text-gray-800 mb-4\">Tableau de Bord</h1>\r\n            <p className=\"text-gray-600\">Bienvenue, {user?.nom_complet || user?.email} !</p>\r\n            <p className=\"text-gray-600 mt-2\">C'est ici que vous trouverez un aperçu de votre exploitation.</p>\r\n            <div className=\"mt-6 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n                <Button onClick={() => navigateTo('parcelles')} Icon={MapPinned} className=\"w-full justify-start p-6 text-left bg-green-50 hover:bg-green-100 text-green-700\"><div className=\"ml-2\"><p className=\"font-semibold\">Mes Parcelles</p><p className=\"text-xs\">Gérer vos terrains agricoles</p></div></Button>\r\n                <Button onClick={() => navigateTo('meteo')} Icon={Sun} className=\"w-full justify-start p-6 text-left bg-blue-50 hover:bg-blue-100 text-blue-700\"><div className=\"ml-2\"><p className=\"font-semibold\">Météo Agricole</p><p className=\"text-xs\">Consulter les prévisions</p></div></Button>\r\n                <Button onClick={() => navigateTo('prix')} Icon={ShoppingCart} className=\"w-full justify-start p-6 text-left bg-yellow-50 hover:bg-yellow-100 text-yellow-700\"><div className=\"ml-2\"><p className=\"font-semibold\">Bourse des Prix</p><p className=\"text-xs\">Suivre les cours du marché</p></div></Button>\r\n            </div>\r\n        </Card>\r\n    );\r\n};\r\nexport default DashboardPage;","// Service Parcelles (Répété ici, serait dans src/services/parcelleService.js)\r\nimport { apiService } from './apiService'; // Assuming apiService.js is in the same directory\r\n\r\nexport const getUserParcelles = async (page = 1, limit = 10) => apiService.get(`/parcelles/user?page=${page}&limit=${limit}`);\r\nexport const getParcelleById = async (id) => apiService.get(`/parcelles/${id}`);\r\nexport const createParcelle = async (parcelleData) => apiService.post('/parcelles', parcelleData);\r\nexport const updateParcelle = async (id, parcelleData) => apiService.put(`/parcelles/${id}`, parcelleData);\r\nexport const deleteParcelle = async (id) => apiService.delete(`/parcelles/${id}`);","// src/pages/parcelles/ParcellesListPage.js\r\nimport React, { useState, useEffect, useCallback } from 'react';\r\nimport { useAuth } from '../../contexts/AuthContext'; // Adapter si nécessaire\r\nimport * as parcelleService from '../../services/parcelleService'; // Adapter si nécessaire\r\nimport { LoadingSpinner } from '../../components/common/LoadingSpinner';\r\nimport { Card } from '../../components/common/Card';\r\nimport { Button } from '../../components/common/Button';\r\nimport { Alert } from '../../components/common/Alert';\r\nimport { PlusCircle, Eye, Edit3, Trash2 } from 'lucide-react';\r\n\r\n\r\nconst ParcellesListPage = ({ navigateTo }) => {\r\n    const [parcelles, setParcelles] = useState([]);\r\n    const [loadingState, setLoadingState] = useState(true);\r\n    const [error, setError] = useState('');\r\n    const [pagination, setPagination] = useState(null);\r\n    const [currentPage, setCurrentPage] = useState(1);\r\n    const { logout } = useAuth();\r\n\r\n    const fetchParcelles = useCallback(async (page) => {\r\n        setLoadingState(true); setError('');\r\n        try {\r\n            const data = await parcelleService.getUserParcelles(page);\r\n            setParcelles(data.data);\r\n            setPagination(data.pagination);\r\n        } catch (err) {\r\n            setError(err.message || \"Erreur lors de la récupération des parcelles.\");\r\n            if (err.message.includes(\"401\") || err.message.includes(\"Accès non autorisé\")) { logout(); navigateTo('login'); }\r\n        } finally { setLoadingState(false); }\r\n    }, [logout, navigateTo]);\r\n\r\n    useEffect(() => { fetchParcelles(currentPage); }, [fetchParcelles, currentPage]);\r\n\r\n    const handleDelete = async (id) => {\r\n        if (window.confirm(\"Êtes-vous sûr de vouloir supprimer cette parcelle ?\")) { // Remplacer par un Modal\r\n            try {\r\n                await parcelleService.deleteParcelle(id);\r\n                setParcelles(parcelles.filter(p => p.id !== id));\r\n                if (parcelles.length === 1 && currentPage > 1) { setCurrentPage(currentPage - 1); }\r\n                else { fetchParcelles(currentPage); }\r\n            } catch (err) { setError(err.message || \"Erreur suppression parcelle.\"); }\r\n        }\r\n    };\r\n    const handlePageChange = (newPage) => { if (pagination && newPage >= 1 && newPage <= pagination.totalPages) { setCurrentPage(newPage); } };\r\n\r\n    if (loadingState) return <div className=\"flex justify-center mt-10\"><LoadingSpinner size=\"lg\" /></div>;\r\n    return (\r\n        <Card>\r\n            <div className=\"flex justify-between items-center mb-6\"><h1 className=\"text-2xl font-semibold text-gray-800\">Mes Parcelles</h1><Button onClick={() => navigateTo('addParcelle')} variant=\"primary\" Icon={PlusCircle}>Ajouter une Parcelle</Button></div>\r\n            {error && <Alert message={error} type=\"error\" onClose={() => setError('')} />}\r\n            {parcelles.length === 0 && !loadingState && (<p className=\"text-gray-600 text-center py-10\">Vous n'avez pas encore de parcelles enregistrées.</p>)}\r\n            {parcelles.length > 0 && (<div className=\"overflow-x-auto\"><table className=\"min-w-full divide-y divide-gray-200\"><thead className=\"bg-gray-50\"><tr><th scope=\"col\" className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Nom</th><th scope=\"col\" className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Superficie (ha)</th><th scope=\"col\" className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Type de Sol</th><th scope=\"col\" className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Actions</th></tr></thead><tbody className=\"bg-white divide-y divide-gray-200\">{parcelles.map((parcelle) => (<tr key={parcelle.id}><td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900\">{parcelle.nom_parcelle}</td><td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">{parcelle.superficie_calculee_ha || 'N/A'}</td><td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">{parcelle.type_sol_predominant || 'N/A'}</td><td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2\"><Button onClick={() => navigateTo(`parcelleDetail/${parcelle.id}`)} variant=\"ghost\" Icon={Eye} className=\"text-blue-600 hover:text-blue-800 p-1\"><span className=\"sr-only\">Voir</span></Button><Button onClick={() => navigateTo(`editParcelle/${parcelle.id}`)} variant=\"ghost\" Icon={Edit3} className=\"text-yellow-600 hover:text-yellow-800 p-1\"><span className=\"sr-only\">Modifier</span></Button><Button onClick={() => handleDelete(parcelle.id)} variant=\"ghost\" Icon={Trash2} className=\"text-red-600 hover:text-red-800 p-1\"><span className=\"sr-only\">Supprimer</span></Button></td></tr>))}</tbody></table></div>)}\r\n            {pagination && pagination.totalPages > 1 && (<div className=\"mt-6 flex justify-center items-center space-x-2\"><Button onClick={() => handlePageChange(currentPage - 1)} disabled={currentPage === 1}>Précédent</Button><span className=\"text-sm text-gray-700\">Page {currentPage} sur {pagination.totalPages}</span><Button onClick={() => handlePageChange(currentPage + 1)} disabled={currentPage === pagination.totalPages}>Suivant</Button></div>)}\r\n        </Card>\r\n    );\r\n};\r\nexport default ParcellesListPage;\r\n","// src/pages/parcelles/ParcelleFormPage.js\r\nimport React, { useState, useEffect } from 'react';\r\nimport { useAuth } from '../../contexts/AuthContext';\r\nimport { apiService } from '../../services/apiService';\r\nimport * as parcelleService from '../../services/parcelleService';\r\nimport { LoadingSpinner } from '../../components/common/LoadingSpinner';\r\nimport { Card } from '../../components/common/Card';\r\nimport { Alert } from '../../components/common/Alert';\r\nimport { Input } from '../../components/common/Input';\r\nimport { Button } from '../../components/common/Button';\r\nimport { Edit3, PlusCircle } from 'lucide-react';\r\n\r\nconst ParcelleFormPage = ({ navigateTo, parcelleId }) => {\r\n    const [nomParcelle, setNomParcelle] = useState('');\r\n    const [description, setDescription] = useState('');\r\n    const [superficie, setSuperficie] = useState('');\r\n    const [typeSol, setTypeSol] = useState('');\r\n    const [geometrie, setGeometrie] = useState('');\r\n    const [cultureActuelleId, setCultureActuelleId] = useState('');\r\n    const [culturesCatalogue, setCulturesCatalogue] = useState([]);\r\n    const [loadingState, setLoadingState] = useState(false);\r\n    const [formError, setFormError] = useState('');\r\n    const [formSuccess, setFormSuccess] = useState('');\r\n    const { logout } = useAuth();\r\n    const isEditing = !!parcelleId;\r\n\r\n    useEffect(() => {\r\n        const fetchCultures = async () => {\r\n            try { const data = await apiService.get('/cultures'); setCulturesCatalogue(data.data || data); }\r\n            catch (err) { console.error(\"Erreur chargement catalogue cultures:\", err); }\r\n        };\r\n        fetchCultures();\r\n        if (isEditing) {\r\n            setLoadingState(true);\r\n            parcelleService.getParcelleById(parcelleId)\r\n                .then(data => {\r\n                    setNomParcelle(data.nom_parcelle); setDescription(data.description || ''); setSuperficie(data.superficie_calculee_ha || '');\r\n                    setTypeSol(data.type_sol_predominant || ''); setGeometrie(data.geometrie ? JSON.stringify(data.geometrie) : '');\r\n                    setCultureActuelleId(data.culture_actuelle_id || ''); setLoadingState(false);\r\n                })\r\n                .catch(err => {\r\n                    setFormError(err.message || \"Erreur chargement parcelle.\");\r\n                    if (err.message.includes(\"401\")) { logout(); navigateTo('login'); } setLoadingState(false);\r\n                });\r\n        }\r\n    }, [parcelleId, isEditing, logout, navigateTo]);\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault(); setFormError(''); setFormSuccess(''); setLoadingState(true);\r\n        let parsedGeometrie;\r\n        try { if (geometrie) parsedGeometrie = JSON.parse(geometrie); }\r\n        catch (err) { setFormError(\"Format GeoJSON invalide.\"); setLoadingState(false); return; }\r\n        const parcelleData = {\r\n            nom_parcelle: nomParcelle, description, superficie_calculee_ha: superficie ? parseFloat(superficie) : null,\r\n            type_sol_predominant: typeSol, geometrie: parsedGeometrie,\r\n            culture_actuelle_id: cultureActuelleId ? parseInt(cultureActuelleId) : null,\r\n        };\r\n        try {\r\n            if (isEditing) { await parcelleService.updateParcelle(parcelleId, parcelleData); setFormSuccess(\"Parcelle mise à jour !\"); }\r\n            else { await parcelleService.createParcelle(parcelleData); setFormSuccess(\"Parcelle créée !\"); setNomParcelle(''); setDescription(''); setSuperficie(''); setTypeSol(''); setGeometrie(''); setCultureActuelleId(''); }\r\n            setTimeout(() => navigateTo('parcelles'), 1500);\r\n        } catch (err) {\r\n            setFormError(err.message || \"Erreur enregistrement parcelle.\");\r\n            if (err.message.includes(\"401\")) { logout(); navigateTo('login'); }\r\n        } finally { setLoadingState(false); }\r\n    };\r\n\r\n    if (loadingState && isEditing && !nomParcelle) return <div className=\"flex justify-center mt-10\"><LoadingSpinner size=\"lg\" /></div>;\r\n    return (\r\n        <Card>\r\n            <h1 className=\"text-2xl font-semibold text-gray-800 mb-6\">{isEditing ? \"Modifier la Parcelle\" : \"Ajouter une Nouvelle Parcelle\"}</h1>\r\n            {formError && <Alert message={formError} type=\"error\" onClose={() => setFormError('')} />}\r\n            {formSuccess && <Alert message={formSuccess} type=\"success\" onClose={() => setFormSuccess('')} />}\r\n            <form onSubmit={handleSubmit} className=\"space-y-6\">\r\n                <Input label=\"Nom de la parcelle\" name=\"nomParcelle\" value={nomParcelle} onChange={(e) => setNomParcelle(e.target.value)} required error={!nomParcelle && formError ? \"Nom requis\" : \"\"} />\r\n                <div><label htmlFor=\"description\" className=\"block text-sm font-medium text-gray-700 mb-1\">Description</label><textarea id=\"description\" name=\"description\" rows=\"3\" value={description} onChange={(e) => setDescription(e.target.value)} className=\"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm\"></textarea></div>\r\n                <Input label=\"Superficie (ha)\" type=\"number\" name=\"superficie\" value={superficie} onChange={(e) => setSuperficie(e.target.value)} />\r\n                <Input label=\"Type de sol prédominant\" name=\"typeSol\" value={typeSol} onChange={(e) => setTypeSol(e.target.value)} />\r\n                <div><label htmlFor=\"geometrie\" className=\"block text-sm font-medium text-gray-700 mb-1\">Géométrie (GeoJSON)</label><textarea id=\"geometrie\" name=\"geometrie\" rows=\"5\" value={geometrie} onChange={(e) => setGeometrie(e.target.value)} placeholder='Ex: {\"type\":\"Polygon\",\"coordinates\":[[[10.0,36.0],[10.1,36.0],[10.1,36.1],[10.0,36.1],[10.0,36.0]]]}' className=\"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm font-mono text-xs\"></textarea><p className=\"mt-1 text-xs text-gray-500\">Collez ici la chaîne GeoJSON. Un outil cartographique sera intégré.</p></div>\r\n                <div><label htmlFor=\"cultureActuelleId\" className=\"block text-sm font-medium text-gray-700 mb-1\">Culture Actuelle (Optionnel)</label><select id=\"cultureActuelleId\" name=\"cultureActuelleId\" value={cultureActuelleId} onChange={(e) => setCultureActuelleId(e.target.value)} className=\"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm rounded-md\"><option value=\"\">-- Sélectionner --</option>{culturesCatalogue.map(c => (<option key={c.id} value={c.id}>{c.nom_culture}</option>))}</select></div>\r\n                <div className=\"flex justify-end space-x-3\"><Button type=\"button\" variant=\"secondary\" onClick={() => navigateTo('parcelles')} disabled={loadingState}>Annuler</Button><Button type=\"submit\" variant=\"primary\" disabled={loadingState} Icon={loadingState ? null : (isEditing ? Edit3 : PlusCircle)}>{loadingState ? <LoadingSpinner size=\"sm\" /> : (isEditing ? \"Mettre à jour\" : \"Créer Parcelle\")}</Button></div>\r\n            </form>\r\n        </Card>\r\n    );\r\n};\r\nexport default ParcelleFormPage;\r\n","// src/pages/parcelles/ParcelleDetailPage.js\r\nimport React, { useState, useEffect } from 'react';\r\nimport { useAuth } from '../../contexts/AuthContext';\r\nimport * as parcelleService from '../../services/parcelleService'; // Assurez-vous que le chemin est correct et que l'import est correct (named/default)\r\nimport { LoadingSpinner } from '../../components/common/LoadingSpinner';\r\nimport { Alert } from '../../components/common/Alert';\r\nimport { Card } from '../../components/common/Card';\r\nimport { Button } from '../../components/common/Button';\r\nimport { Edit3 } from 'lucide-react';\r\n\r\nconst ParcelleDetailPage = ({ navigateTo, parcelleId }) => {\r\n    const [parcelle, setParcelle] = useState(null);\r\n    const [loadingState, setLoadingState] = useState(true);\r\n    const [error, setError] = useState('');\r\n    const { logout } = useAuth();\r\n\r\n    useEffect(() => {\r\n        if (parcelleId) {\r\n            setLoadingState(true);\r\n            parcelleService.getParcelleById(parcelleId)\r\n                .then(data => { setParcelle(data); setLoadingState(false); })\r\n                .catch(err => {\r\n                    setError(err.message || \"Erreur chargement détails parcelle.\");\r\n                    if (err.message.includes(\"401\")) { logout(); navigateTo('login'); } setLoadingState(false);\r\n                });\r\n        }\r\n    }, [parcelleId, logout, navigateTo]);\r\n\r\n    if (loadingState) return <div className=\"flex justify-center mt-10\"><LoadingSpinner size=\"lg\" /></div>;\r\n    if (error) return <Alert message={error} type=\"error\" />;\r\n    if (!parcelle) return <Alert message=\"Parcelle non trouvée.\" type=\"warning\" />;\r\n\r\n    return (\r\n        <Card>\r\n            <div className=\"flex justify-between items-start\"><h1 className=\"text-3xl font-bold text-gray-800 mb-2\">{parcelle.nom_parcelle}</h1><Button onClick={() => navigateTo(`editParcelle/${parcelle.id}`)} variant=\"secondary\" Icon={Edit3}>Modifier</Button></div>\r\n            <p className=\"text-gray-600 mb-4\">{parcelle.description || \"Aucune description.\"}</p>\r\n            <div className=\"mt-6 grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                <div><h3 className=\"text-lg font-semibold text-gray-700\">Informations Générales</h3><ul className=\"mt-2 space-y-1 text-sm text-gray-600\"><li><strong>Superficie:</strong> {parcelle.superficie_calculee_ha || 'N/A'} ha</li><li><strong>Type de sol:</strong> {parcelle.type_sol_predominant || 'N/A'}</li><li><strong>Date de création:</strong> {new Date(parcelle.date_creation).toLocaleDateString()}</li></ul></div>\r\n                <div><h3 className=\"text-lg font-semibold text-gray-700\">Géométrie (GeoJSON)</h3><pre className=\"mt-2 bg-gray-100 p-3 rounded-md text-xs overflow-x-auto\">{JSON.stringify(parcelle.geometrie, null, 2) || \"Non définie\"}</pre></div>\r\n            </div>\r\n            <div className=\"mt-8\"><Button onClick={() => navigateTo('parcelles')} variant=\"ghost\">Retour à la liste</Button></div>\r\n        </Card>\r\n    );\r\n};\r\nexport default ParcelleDetailPage;","import React from 'react';\r\nimport { Card } from '../../components/common/Card';\r\n\r\nconst CulturesCataloguePage = ({navigateTo}) => <Card><h1 className=\"text-xl font-semibold\">Catalogue des Cultures (À implémenter)</h1></Card>;\r\nexport default CulturesCataloguePage;","import React from 'react';\r\nimport { Card } from '../../components/common/Card';\r\n\r\nconst ElevagePage = ({navigateTo}) => <Card><h1 className=\"text-xl font-semibold\">Gestion de l'Élevage (À implémenter)</h1></Card>;\r\nexport default ElevagePage;","import React from 'react';\r\nimport { Card } from '../../components/common/Card';\r\n\r\nconst PrixPage = ({navigateTo}) => <Card><h1 className=\"text-xl font-semibold\">Bourse des Prix (À implémenter)</h1></Card>;\r\nexport default PrixPage;","import React from 'react';\r\nimport { Card } from '../../components/common/Card';\r\n\r\nconst MeteoPage = ({navigateTo}) => <Card><h1 className=\"text-xl font-semibold\">Météo Agricole (À implémenter)</h1></Card>;\r\nexport default MeteoPage;","import React from 'react';\r\nimport { Card } from '../../components/common/Card';\r\n\r\nconst CommunautePage = ({navigateTo}) => <Card><h1 className=\"text-xl font-semibold\">Communauté & Forum (À implémenter)</h1></Card>;\r\nexport default CommunautePage;\r\n","import React from 'react';\r\nimport { Card } from '../../components/common/Card';\r\n\r\nconst GeminiPage = ({navigateTo}) => <Card><h1 className=\"text-xl font-semibold\">Conseils IA Gemini (À implémenter)</h1></Card>;\r\nexport default GeminiPage;","import React from 'react';\r\nimport { Card } from '../components/common/Card';\r\nimport { AlertTriangle } from 'lucide-react';\r\n\r\nconst NotFoundPage = () => (<Card className=\"text-center\"><AlertTriangle size={64} className=\"mx-auto text-yellow-500 mb-4\" /><h1 className=\"text-3xl font-bold text-gray-800\">404 - Page Non Trouvée</h1><p className=\"text-gray-600 mt-2\">Désolé, la page que vous recherchez n'existe pas.</p></Card>);\r\nexport default NotFoundPage;","// src/AppRouter.js (Anciennement le composant App, gère la logique de navigation)// Retiré useCallback car navigateTo n'est plus dans les deps\r\nimport { useAuth } from './contexts/AuthContext'; // Assurez-vous que le chemin est correct\r\nimport React, { useState, useEffect, useCallback } from 'react';\r\n\r\n// Importer les layouts et les pages\r\nimport MainLayout from './components/layout/MainLayout'; // Chemin exemple\r\nimport HomePage from './pages/HomePage';\r\nimport LoginPage from './pages/LoginPage';\r\nimport RegisterPage from './pages/RegisterPage';\r\nimport DashboardPage from './pages/DashboardPage';\r\nimport ParcellesListPage from './pages/parcelles/ParcellesListPage';\r\nimport ParcelleFormPage from './pages/parcelles/ParcelleFormPage';\r\nimport ParcelleDetailPage from './pages/parcelles/ParcelleDetailPage';\r\nimport CulturesCataloguePage from './pages/cultures/CulturesCataloguePage';\r\nimport ElevagePage from './pages/elevage/ElevagePage';\r\nimport PrixPage from './pages/prix/PrixPage';\r\nimport MeteoPage from './pages/meteo/MeteoPage';\r\nimport CommunautePage from './pages/communaute/CommunautePage';\r\nimport GeminiPage from './pages/gemini/GeminiPage';\r\nimport NotFoundPage from './pages/NotFoundPage';\r\nimport { LoadingSpinner } from './components/common/LoadingSpinner'; // Chemin exemple\r\n\r\n\r\nfunction AppRouterInternal() {\r\n    const [currentPage, setCurrentPage] = useState('home');\r\n    const [pageParam, setPageParam] = useState(null);\r\n    const { isAuthenticated, loading: authLoading } = useAuth(); // Utilise useAuth ici\r\n\r\n\r\n\r\n    const navigateTo = useCallback((page, param = null) => {\r\n        setCurrentPage(page);\r\n        setPageParam(param);\r\n        window.scrollTo(0, 0);\r\n    }, []); // setCurrentPage and setPageParam are stable and don't need to be listed as dependencies\r\n\r\n    useEffect(() => {\r\n        if (!authLoading) {\r\n            if (isAuthenticated) {\r\n                if (currentPage === 'login' || currentPage === 'register') {\r\n                    navigateTo('dashboard');\r\n                }\r\n            } else {\r\n                const protectedPages = ['dashboard', 'parcelles', 'addParcelle', 'editParcelle', 'parcelleDetail', 'elevage', 'meteo', 'communaute', 'gemini'];\r\n                if (protectedPages.includes(currentPage)) {\r\n                    navigateTo('login');\r\n                }\r\n            }\r\n        }\r\n    }, [isAuthenticated, authLoading, currentPage, navigateTo]);\r\n\r\n    if (authLoading) {\r\n        return (\r\n            <div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\r\n                <LoadingSpinner size=\"lg\" />\r\n            </div>\r\n        );\r\n    }\r\n\r\n    let pageComponent;\r\n    switch (currentPage) {\r\n        case 'home': pageComponent = <HomePage navigateTo={navigateTo} />; break;\r\n        case 'login': pageComponent = <LoginPage navigateTo={navigateTo} />; break;\r\n        case 'register': pageComponent = <RegisterPage navigateTo={navigateTo} />; break;\r\n        case 'dashboard': pageComponent = isAuthenticated ? <DashboardPage navigateTo={navigateTo} /> : <LoginPage navigateTo={navigateTo} />; break;\r\n        case 'parcelles': pageComponent = isAuthenticated ? <ParcellesListPage navigateTo={navigateTo} /> : <LoginPage navigateTo={navigateTo} />; break;\r\n        case 'addParcelle': pageComponent = isAuthenticated ? <ParcelleFormPage navigateTo={navigateTo} /> : <LoginPage navigateTo={navigateTo} />; break;\r\n        case 'editParcelle': pageComponent = isAuthenticated ? <ParcelleFormPage navigateTo={navigateTo} parcelleId={pageParam} /> : <LoginPage navigateTo={navigateTo} />; break;\r\n        case 'parcelleDetail': pageComponent = isAuthenticated ? <ParcelleDetailPage navigateTo={navigateTo} parcelleId={pageParam} /> : <LoginPage navigateTo={navigateTo} />; break;\r\n        case 'cultures': pageComponent = <CulturesCataloguePage navigateTo={navigateTo} />; break;\r\n        case 'elevage': pageComponent = isAuthenticated ? <ElevagePage navigateTo={navigateTo} /> : <LoginPage navigateTo={navigateTo} />; break;\r\n        case 'prix': pageComponent = <PrixPage navigateTo={navigateTo} />; break;\r\n        case 'meteo': pageComponent = isAuthenticated ? <MeteoPage navigateTo={navigateTo} /> : <LoginPage navigateTo={navigateTo} />; break;\r\n        case 'communaute': pageComponent = isAuthenticated ? <CommunautePage navigateTo={navigateTo} /> : <LoginPage navigateTo={navigateTo} />; break;\r\n        case 'gemini': pageComponent = isAuthenticated ? <GeminiPage navigateTo={navigateTo} /> : <LoginPage navigateTo={navigateTo} />; break;\r\n        default: pageComponent = <NotFoundPage />;\r\n    }\r\n\r\n    return (\r\n        <MainLayout navigateTo={navigateTo}>\r\n            {pageComponent}\r\n        </MainLayout>\r\n    );\r\n}\r\nexport default AppRouterInternal; // Exporter si utilisé dans AgriApp.js","// src/AgriApp.js\r\nimport React from 'react';\r\nimport { AuthProvider } from './contexts/AuthContext'; // Assurez-vous que le chemin vers AuthContext.js est correct\r\nimport AppRouterInternal from './AppRouter'; // Assurez-vous que le chemin vers votre composant de routage principal (AppRouter.js ou AppRouterInternal.js) est correct\r\n\r\n/**\r\n * AgriApp est le composant racine de l'application.\r\n * Il enveloppe l'application avec les fournisseurs de contexte nécessaires,\r\n * comme AuthProvider pour gérer l'état d'authentification global.\r\n */\r\nconst AgriApp = () => {\r\n  return (\r\n    <AuthProvider>\r\n      <AppRouterInternal /> {/* Ou AppRouter, selon le nom de votre fichier de routage */}\r\n    </AuthProvider>\r\n  );\r\n};\r\n\r\nexport default AgriApp;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom/client';\r\nimport './index.css'; // Ou le chemin vers votre fichier CSS principal (ex: tailwind.css)\r\nimport AgriApp from './AgriApp'; // Assurez-vous que ce chemin pointe vers votre composant racine (celui qui contient AuthProvider et AppRouter)\r\n//import reportWebVitals from './reportWebVitals';\r\n\r\nconst root = ReactDOM.createRoot(document.getElementById('root'));\r\nroot.render(\r\n  <React.StrictMode>\r\n    <AgriApp />\r\n  </React.StrictMode>\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\n//reportWebVitals();","// src/contexts/AuthContext.js\r\nimport React, { useState, useEffect, createContext, useContext, useCallback } from 'react'; // Déjà importé en haut\r\nconst getApiBaseUrlFromContext = () => { // Renommé pour éviter conflit\r\n    try {\r\n        if (typeof process !== 'undefined' && process.env && process.env.REACT_APP_API_URL) {\r\n            return process.env.REACT_APP_API_URL;\r\n        }\r\n    } catch (e) {\r\n        console.warn(\"AuthContext: Impossible d'accéder à process.env.REACT_APP_API_URL, utilisation de l'URL par défaut.\", e);\r\n    }\r\n    return 'http://localhost:3001/api';\r\n};\r\nconst API_BASE_URL_CONTEXT = getApiBaseUrlFromContext();\r\n\r\nconst AuthContextInstance = createContext(null); // Renommé pour éviter conflit\r\n\r\nexport const AuthProvider = ({ children }) => {\r\n    const [user, setUser] = useState(null);\r\n    const [token, setToken] = useState(localStorage.getItem('agritunisie_token'));\r\n    const [loadingAuth, setLoadingAuth] = useState(true); // Renommé pour clarté\r\n\r\n    const logout = useCallback(() => {\r\n        setToken(null);\r\n        setUser(null);\r\n        localStorage.removeItem('agritunisie_token');\r\n        localStorage.removeItem('agritunisie_user');\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        if (token) {\r\n            try {\r\n                const storedUser = localStorage.getItem('agritunisie_user');\r\n                if (storedUser) {\r\n                    setUser(JSON.parse(storedUser));\r\n                } else {\r\n                    logout();\r\n                }\r\n            } catch (error) {\r\n                console.error(\"Erreur AuthContext: récupération utilisateur localStorage\", error);\r\n                logout();\r\n            }\r\n        }\r\n        setLoadingAuth(false);\r\n    }, [token, logout]);\r\n\r\n    const login = async (email, password) => {\r\n        setLoadingAuth(true);\r\n        try {\r\n            const response = await fetch(`${API_BASE_URL_CONTEXT}/auth/login`, {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({ email, password }),\r\n            });\r\n            const data = await response.json();\r\n            if (!response.ok) throw new Error(data.message || 'Échec de la connexion');\r\n            setToken(data.token);\r\n            setUser(data.user);\r\n            localStorage.setItem('agritunisie_token', data.token);\r\n            localStorage.setItem('agritunisie_user', JSON.stringify(data.user));\r\n            setLoadingAuth(false);\r\n            return data;\r\n        } catch (error) {\r\n            console.error(\"Erreur de connexion (AuthContext):\", error);\r\n            setLoadingAuth(false);\r\n            throw error;\r\n        }\r\n    };\r\n\r\n    const register = async (userData) => {\r\n        setLoadingAuth(true);\r\n        try {\r\n            const response = await fetch(`${API_BASE_URL_CONTEXT}/auth/register`, {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify(userData),\r\n            });\r\n            const data = await response.json();\r\n            if (!response.ok) throw new Error(data.message || 'Échec de l\\'inscription');\r\n            setLoadingAuth(false);\r\n            return data;\r\n        } catch (error) {\r\n            console.error(\"Erreur d'inscription (AuthContext):\", error);\r\n            setLoadingAuth(false);\r\n            throw error;\r\n        }\r\n    };\r\n\r\n    return (\r\n        <AuthContextInstance.Provider value={{ user, token, login, register, logout, loading: loadingAuth, isAuthenticated: !!token }}>\r\n            {children}\r\n        </AuthContextInstance.Provider>\r\n    );\r\n};\r\n\r\nexport const useAuth = () => useContext(AuthContextInstance);","// src/services/apiService.js\r\nconst getApiBaseUrlFromApiService = () => { // Renommé\r\n    try {\r\n        if (typeof process !== 'undefined' && process.env && process.env.REACT_APP_API_URL) {\r\n            return process.env.REACT_APP_API_URL;\r\n        }\r\n    } catch (e) {\r\n        console.warn(\"ApiService: Impossible d'accéder à process.env.REACT_APP_API_URL, utilisation de l'URL par défaut.\", e);\r\n    }\r\n    return 'http://localhost:3001/api';\r\n};\r\nconst API_BASE_URL_SERVICE = getApiBaseUrlFromApiService();\r\n\r\nexport const apiService = {\r\n    get: async (endpoint) => {\r\n        const token = localStorage.getItem('agritunisie_token');\r\n        const response = await fetch(`${API_BASE_URL_SERVICE}${endpoint}`, { headers: { 'Authorization': `Bearer ${token}` } });\r\n        if (!response.ok) {\r\n            if (response.status === 401) console.warn(\"API call 401 (apiService)\");\r\n            const errorData = await response.json().catch(() => ({ message: response.statusText }));\r\n            throw new Error(errorData.message || `Erreur API GET: ${response.status}`);\r\n        }\r\n        return response.json();\r\n    },\r\n    post: async (endpoint, data) => {\r\n        const token = localStorage.getItem('agritunisie_token');\r\n        const response = await fetch(`${API_BASE_URL_SERVICE}${endpoint}`, {\r\n            method: 'POST',\r\n            headers: { 'Content-Type': 'application/json', 'Authorization': `Bearer ${token}` },\r\n            body: JSON.stringify(data),\r\n        });\r\n        if (!response.ok) {\r\n            const errorData = await response.json().catch(() => ({ message: response.statusText }));\r\n            throw new Error(errorData.message || `Erreur API POST: ${response.status}`);\r\n        }\r\n        return response.json();\r\n    },\r\n    put: async (endpoint, data) => {\r\n        const token = localStorage.getItem('agritunisie_token');\r\n        const response = await fetch(`${API_BASE_URL_SERVICE}${endpoint}`, {\r\n            method: 'PUT',\r\n            headers: { 'Content-Type': 'application/json', 'Authorization': `Bearer ${token}` },\r\n            body: JSON.stringify(data),\r\n        });\r\n        if (!response.ok) {\r\n            const errorData = await response.json().catch(() => ({ message: response.statusText }));\r\n            throw new Error(errorData.message || `Erreur API PUT: ${response.status}`);\r\n        }\r\n        return response.json();\r\n    },\r\n    delete: async (endpoint) => {\r\n        const token = localStorage.getItem('agritunisie_token');\r\n        const response = await fetch(`${API_BASE_URL_SERVICE}${endpoint}`, {\r\n            method: 'DELETE',\r\n            headers: { 'Authorization': `Bearer ${token}` },\r\n        });\r\n        if (!response.ok) {\r\n            const errorData = await response.json().catch(() => ({ message: response.statusText }));\r\n            throw new Error(errorData.message || `Erreur API DELETE: ${response.status}`);\r\n        }\r\n        return response.json();\r\n    },\r\n};\r\n"],"sourceRoot":""}